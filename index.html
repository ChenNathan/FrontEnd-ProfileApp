<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Nanagram</title>
        <style>
            body {text-align: center; background-color: black; color: grey;}
        </style>
    </head>

    <body>
        <center>
            <img src="305A4 Logo Banner.png", width="1000">
            <h1>
                Welcome to NanaGram!
            </h1>
            <iframe src="https://thunkable.site/w/KlfWANZuq_q7BdDpJMVwl" title="Nanagram ProfileApp" height = 725 width = 450></iframe>
            <p><span class="name"></span></p>
            <p><img class="image" width="100" height="100" /></p>
            <p><span class="age"></span></p>
            <p><span class="bio"></span></p>
            <p><span class="pronouns"></span></p>
            <h4>Hardcoded ID's</h4>
            <p>MdyYUAnDWnOvWvUWXj3MB37fM4R2</p>
            <p>woa8ND3JUSQX6fDcPT1ch2GH2Su2</p>
            <input class="id_input" type="text" placeholder="Enter ID" />
            <button class="search_button">Search</button>
        </center>



        <script type="module">
          // Import the functions you need from the SDKs you need
          import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
          // TODO: Add SDKs for Firebase products that you want to use
          // https://firebase.google.com/docs/web/setup#available-libraries
        
          // Your web app's Firebase configuration
          const firebaseConfig = {
            apiKey: "AIzaSyCXh_eeLNiIKRjcrsiZHsoL_SVyj0RxPto",
            authDomain: "profileapp-5c2e4.firebaseapp.com",
            databaseURL: "https://profileapp-5c2e4-default-rtdb.firebaseio.com",
            projectId: "profileapp-5c2e4",
            storageBucket: "profileapp-5c2e4.appspot.com",
            messagingSenderId: "467769292395",
            appId: "1:467769292395:web:f052d98650fc4ae9d9232e"
          };

          // Initialize Firebase
          const app = initializeApp(firebaseConfig);
            
            import {getDataBase, ref, get, set, child, update, remove}
            from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";
              
            const db = getDataBase();

            var userName = document.querySelector(".name");
            var userAge = document.querySelector(".age");
            var userBio = document.querySelector(".bio");
            var userPronouns = document.querySelector(".pronouns");
            var userImage = document.querySelector(".image");
            var userInputID = document.querySelector(".id_input");
            var userSearchButton = document.querySelector(".search_button");

            function FindData() {
                const dbref = ref(db);

                get(child(dbref, userInputID.value))
                    .then((snapshot) => {
                        if (snapshot.exists()) {
                            userName.innerHTML = "Name: " + snapshot.val().name;
                            userBio.innerHTML = "Bio: " + snapshot.val().bio;
                            userAge.innerHTML = "Age: " + snapshot.val().age;
                            userPronouns.innerHTML =
                                "Pronouns: " + snapshot.val().pronouns;
                            userImage.src = snapshot.val().image;
                        } else {
                            alert("No data found");
                        }
                    })
                    .catch((error) => {
                        alert(error);
                    });
            }
            userSearchButton.onclick = FindData;
        </script>
    </body>
</html>
